<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Лабораторна робота №5</title>
<style>
  html { scroll-behavior: smooth; }
  
  body {
    font-family: "Segoe UI", Arial, sans-serif;
    background-color: #f6f8fc;
    margin: 20px;
    color: #222;
    line-height: 1.6;
  }

  /* Плаваюче меню (Стиль як у Lab 4) */
  .floating-nav {
    position: fixed;
    right: 30px;
    top: 100px;
    width: 220px;
    background: #fff;
    border: 1px solid #ccd4e0;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    padding: 12px 16px;
    font-size: 14px;
    z-index: 999;
    max-height: 80vh;
    overflow-y: auto;
  }
  .floating-nav h3 {
    margin-top: 0;
    text-align: center;
    font-size: 15px;
    color: #003366;
    border-bottom: 2px solid #003366;
    padding-bottom: 4px;
  }
  .floating-nav ul { list-style: none; margin: 10px 0 0; padding: 0; }
  .floating-nav li { margin: 6px 0; }
  .floating-nav a { color: #0044cc; text-decoration: none; transition: color 0.2s; }
  .floating-nav a:hover { color: #001a66; text-decoration: underline; }
  
  /* Додатковий стиль для роздільників у меню */
  .nav-header {
      font-weight: bold;
      color: #333;
      margin-top: 12px;
      margin-bottom: 4px;
      font-size: 13px;
      border-bottom: 1px solid #eee;
  }

  /* Стилі для основного контенту */
  header { text-align: center; margin-bottom: 30px; }
  header h1 { color: #003366; margin-bottom: 10px; }
  
  section {
    background: #ffffff;
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    margin-bottom: 30px;
    margin-right: 260px; /* Місце для меню праворуч */
  }

  h2 { color: #003366; border-bottom: 2px solid #003366; padding-bottom: 5px; margin-top: 0; }
  h3 { color: #005599; margin-top: 20px; font-size: 1.1em; border-left: 4px solid #005599; padding-left: 10px; }
  
  /* Блок коду */
  pre {
    background: #282c34;
    color: #abb2bf;
    padding: 15px;
    border-radius: 6px;
    overflow-x: auto;
    font-family: Consolas, monospace;
    font-size: 13px;
    line-height: 1.4;
  }
  
  /* Консоль для виводу результатів */
  .console-output {
    background: #f4f4f4;
    border: 1px solid #ccc;
    padding: 10px;
    font-family: monospace;
    white-space: pre-wrap;
    min-height: 40px;
    margin-top: 10px;
    border-radius: 5px;
    color: #333;
  }
  
  button {
    background: #003366;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
    margin-top: 5px;
    transition: background 0.2s;
  }
  button:hover { background: #005599; }
  
  .back-link {
    display: inline-block;
    margin-bottom: 20px;
    color: #003366;
    text-decoration: none;
    font-weight: bold;
    font-size: 16px;
  }

  @media (max-width: 900px) {
    .floating-nav { position: static; width: 100%; margin-bottom: 20px; }
    section { margin-right: 0; }
  }
</style>
</head>
<body>

<header>
  <a href="index.html" class="back-link">← На головну</a>
  <h1>ЛАБОРАТОРНА РОБОТА №5</h1>
  <p><b>Тема:</b> ОБ'ЄКТ. МЕТОДИ ОБ'ЄКТА. МАСИВ ОБ'ЄКТІВ. CALLBACK. СТРІЛОЧНІ ФУНКЦІЇ. <br> <b>Варіант:</b> 7</p>
</header>

<nav class="floating-nav">
  <h3>Зміст</h3>
  <ul>
    <li><a href="#topic">Постановка завдання</a></li>
    
    <li class="nav-header">Завдання №1</li>
    <li><a href="#task1">1. Callback</a></li>
    <li><a href="#task3">3. Об'єкти (Medicines)</a></li>
    <li><a href="#task5">5. Масиви (Знижка)</a></li>
    <li><a href="#task7">7. Класи (Client)</a></li>
    <li><a href="#task9">9. Reduce (Теги)</a></li>
    <li><a href="#task10">10. Перевірка дужок</a></li>

    <li class="nav-header">Завдання №2</li>
    <li><a href="#task2_1">1. FlatMap</a></li>
    <li><a href="#task2_3">3. Every (Парні)</a></li>
    <li><a href="#task2_5">5. Sort (Рядки)</a></li>
    <li><a href="#task2_7">7. Клас Calculator</a></li>
    
    <li><a href="#conclusions">Висновки</a></li>
  </ul>
</nav>

<section id="topic">
  <h2>Тема, Мета та Посилання</h2>
  <p><b>Мета:</b> придбати практичні навички роботи з об'єктами, методами об'єкта, callback-функціями, стрілочними функціями та перебираючими методами масиву.</p>
  <ul>
    <li><a href="https://litovcenkoangelina84-png.github.io/IP34_appWEB-LytovchenkoAngelina-FIOT-2025/" target="_blank">Жива сторінка WEB-застосунку</a></li>
    <li><a href="https://github.com/litovcenkoangelina84-png/IP34_appWEB-LytovchenkoAngelina-FIOT-2025" target="_blank">Репозиторій WEB-застосунку</a></li>
    <li><a href="https://litovcenkoangelina84-png.github.io/IP-34-appRECORD-LytovchenkoAngelina-FIOT-2025/" target="_blank">Жива сторінка Звітів</a></li>
  </ul>
</section>

<section id="task1">
  <h2>Завдання 1.1: Callbacks</h2>
  <p>Функція <code>createProduct(obj, callback)</code>, яка додає ID та викликає колбек.</p>
  
  <h3>Програмний код</h3>
<pre>
// Колбеки
function logProduct(product) {
    console.log("Product created:", product);
}
function logTotalPrice(product) {
    const total = (product.price && product.quantity) 
                  ? product.price * product.quantity 
                  : 0;
    console.log(`Total price for ${product.name}: ${total}`);
}

// Основна функція
function createProduct(obj, callback) {
    const product = { ...obj, id: Date.now() };
    callback(product);
}

function runTask1() {
    const item = { name: "Laptop", price: 1500, quantity: 2 };
    let out = "";
    
    // Виклик 1
    createProduct(item, (p) => {
        logProduct(p);
        out += `[logProduct]: ID ${p.id}, Name: ${p.name}\n`;
    });

    // Виклик 2
    createProduct(item, (p) => {
        logTotalPrice(p);
        out += `[logTotalPrice]: Total: ${p.price * p.quantity}`;
    });
    
    document.getElementById('log1').innerText = out;
}
</pre>
  <h3>Результат виконання</h3>
  <button onclick="runTask1()">Виконати createProduct</button>
  <div id="log1" class="console-output">Результат...</div>
</section>

<section id="task3">
  <h2>Завдання 1.3: Обробка об'єкта (Medicines)</h2>
  <p>Фільтрація прострочених медикаментів та сортування.</p>
  <h3>Програмний код</h3>
<pre>
const medicines = {
    Агалгін: new Date("2022-05-01"),
    Ношпа: new Date("2025-07-02"),
    Альфахолін: new Date("2024-12-21"),
    Аспірин: new Date("2022-08-15"),
    Аспаркам: new Date("2024-04-18"),
};

function runTask3() {
    const entries = Object.entries(medicines);
    const now = new Date();
    
    // Фільтрація (строк > поточна дата)
    const valid = entries.filter(([name, date]) => date > now);
    
    // Сортування (хронологічно)
    valid.sort((a, b) => a[1] - b[1]);
    
    const names = valid.map(([name, date]) => 
        `${name} (${date.toISOString().split('T')[0]})`
    );

    console.log(names);
    document.getElementById('log3').innerText = names.join("\n");
}
</pre>
  <h3>Результат виконання</h3>
  <button onclick="runTask3()">Перевірити аптечку</button>
  <div id="log3" class="console-output">Результат...</div>
</section>

<section id="task5">
  <h2>Завдання 1.5: Масив об'єктів (Знижка)</h2>
  <p>Функція для надання знижки 20% та додавання ID.</p>
  <h3>Програмний код</h3>
<pre>
const fruits = [
  { name: "apple", price: 200 },
  { name: "orange", price: 300 },
  { name: "grapes", price: 750 },
];

function applyDiscountAndId(arr) {
    return arr.map((fruit, index) => ({
        ...fruit,
        id: index + 1,
        price: fruit.price * 0.8 // -20%
    }));
}

function runTask5() {
    const result = applyDiscountAndId(fruits);
    console.log(result);
    document.getElementById('log5').innerText = JSON.stringify(result, null, 2);
}
</pre>
  <h3>Результат виконання</h3>
  <button onclick="runTask5()">Застосувати знижку</button>
  <div id="log5" class="console-output">Результат...</div>
</section>

<section id="task7">
  <h2>Завдання 1.7: Класи (Client)</h2>
  <p>Клас з приватними властивостями #login, #email.</p>
  <h3>Програмний код</h3>
<pre>
class Client {
    #login;
    #email;

    constructor(login, email) {
        this.#login = login;
        this.#email = email;
    }

    get login() { return this.#login; }
    set login(val) { 
        if(val) this.#login = val; 
    }

    get email() { return this.#email; }
    set email(val) { 
        if(val.includes("@")) this.#email = val; 
    }
}

function runTask7() {
    const client = new Client("user1", "test@mail.com");
    let log = `Start: ${client.login}, ${client.email}\n`;
    
    client.login = "admin";
    client.email = "admin@google.com";
    
    log += `Change: ${client.login}, ${client.email}`;
    document.getElementById('log7').innerText = log;
}
</pre>
  <h3>Результат виконання</h3>
  <button onclick="runTask7()">Тестувати клас</button>
  <div id="log7" class="console-output">Результат...</div>
</section>

<section id="task9">
  <h2>Завдання 1.9: Підрахунок тегів (Reduce)</h2>
  <p>Повернути об'єкт з кількістю кожного тегу.</p>
  <h3>Програмний код</h3>
<pre>
const tweets = [
    { id: "000", likes: 5, tags: ["js", "nodejs"] },
    { id: "001", likes: 2, tags: ["html", "css"] },
    { id: "002", likes: 17, tags: ["html", "js", "nodejs"] },
    { id: "003", likes: 8, tags: ["css", "react"] },
    { id: "004", likes: 0, tags: ["js", "nodejs", "react"] },
];

function countTags(arr) {
    return arr.reduce((acc, tweet) => {
        tweet.tags.forEach(tag => {
            acc[tag] = (acc[tag] || 0) + 1;
        });
        return acc;
    }, {});
}

function runTask9() {
    const stats = countTags(tweets);
    document.getElementById('log9').innerText = JSON.stringify(stats, null, 2);
}
</pre>
  <h3>Результат виконання</h3>
  <button onclick="runTask9()">Рахувати теги</button>
  <div id="log9" class="console-output">Результат...</div>
</section>

<section id="task10">
  <h2>Завдання 1.10: Перевірка дужок</h2>
  <p>Функція перевірки правильності закриття дужок.</p>
  <h3>Програмний код</h3>
<pre>
function checkBrackets(str) {
    const stack = [];
    const map = { '(': ')', '{': '}', '[': ']' };
    
    for (let char of str) {
        if (map[char]) {
            stack.push(char);
        } else if (Object.values(map).includes(char)) {
            if (map[stack.pop()] !== char) return false;
        }
    }
    return stack.length === 0;
}

function runTask10() {
    const s1 = "function t() { return [1]; }";
    const s2 = "function t() { return [1; }";
    
    const res = `"${s1}" -> ${checkBrackets(s1)}\n"${s2}" -> ${checkBrackets(s2)}`;
    document.getElementById('log10').innerText = res;
}
</pre>
  <h3>Результат виконання</h3>
  <button onclick="runTask10()">Перевірити код</button>
  <div id="log10" class="console-output">Результат...</div>
</section>

<section id="task2_1">
  <h2>Завдання 2.1: Об'єднання значень (FlatMap)</h2>
  <p>Створити єдиний масив значень з масиву об'єктів.</p>
  <h3>Програмний код</h3>
<pre>
const data = [
  { id: 1, values: [1, 2, 3] },
  { id: 2, values: [4, 5, 6] },
  { id: 3, values: [7, 8, 9] },
];

function runTask2_1() {
    // Використовуємо flatMap для отримання плоского масиву
    const flatValues = data.flatMap(item => item.values);
    
    console.log(flatValues);
    document.getElementById('res2_1').innerText = 
        `Вхід: ${JSON.stringify(data)}\nВихід: [${flatValues.join(', ')}]`;
}
</pre>
  <h3>Результат виконання</h3>
  <button onclick="runTask2_1()">Виконати flatMap</button>
  <div id="res2_1" class="console-output">Результат...</div>
</section>

<section id="task2_3">
  <h2>Завдання 2.3: Перевірка на парність (Every)</h2>
  <p>Перевірити, чи всі елементи масиву є парними.</p>
  <h3>Програмний код</h3>
<pre>
const numbers = [2, 4, 6, 8, 10];

function runTask2_3() {
    // Метод every повертає true, якщо умова виконується для всіх
    const allEven = numbers.every(num => num % 2 === 0);
    
    console.log(allEven);
    document.getElementById('res2_3').innerText = 
        `Масив: [${numbers.join(', ')}]\nВсі парні? -> ${allEven}`;
}
</pre>
  <h3>Результат виконання</h3>
  <button onclick="runTask2_3()">Перевірити масив</button>
  <div id="res2_3" class="console-output">Результат...</div>
</section>

<section id="task2_5">
  <h2>Завдання 2.5: Сортування рядків (Sort)</h2>
  <p>Відсортувати масив фруктів в алфавітному порядку.</p>
  <h3>Програмний код</h3>
<pre>
const stringArray = ['banana', 'orange', 'apple', 'pear'];

function runTask2_5() {
    // Створюємо копію через [...], щоб не змінювати оригінал (опціонально)
    const sorted = [...stringArray].sort();
    
    console.log(sorted);
    document.getElementById('res2_5').innerText = 
        `Оригінал: [${stringArray.join(', ')}]\nВідсортовано: [${sorted.join(', ')}]`;
}
</pre>
  <h3>Результат виконання</h3>
  <button onclick="runTask2_5()">Сортувати масив</button>
  <div id="res2_5" class="console-output">Результат...</div>
</section>

<section id="task2_7">
  <h2>Завдання 2.7: Клас Calculator (Chaining)</h2>
  <p>Клас з методами <code>add, subtract, multiply, divide</code> та підтримкою ланцюжкового виклику.</p>
  <h3>Програмний код</h3>
<pre>
class Calculator {
    constructor() {
        this.value = 0;
    }
    
    number(val) {
        this.value = val;
        return this; // Повертаємо this для ланцюжка
    }
    
    add(val) {
        this.value += val;
        return this;
    }
    
    subtract(val) {
        this.value -= val;
        return this;
    }
    
    multiply(val) {
        this.value *= val;
        return this;
    }
    
    divide(val) {
        if (val === 0) {
            alert("Помилка: ділення на нуль!");
            return this;
        }
        this.value /= val;
        return this;
    }
    
    getResult() {
        return this.value;
    }
}

function runTask2_7() {
    const calc = new Calculator();
    
    // Ланцюжковий виклик: 10 + 5 - 3 * 4 / 2
    const res = calc.number(10)
                    .add(5)       // 15
                    .subtract(3)  // 12
                    .multiply(4)  // 48
                    .divide(2)    // 24
                    .getResult();
    
    console.log(res);
    document.getElementById('res2_7').innerText = 
        `Операція: ((10 + 5) - 3) * 4 / 2\nРезультат: ${res}`;
}
</pre>
  <h3>Результат виконання</h3>
  <button onclick="runTask2_7()">Виконати обчислення</button>
  <div id="res2_7" class="console-output">Результат...</div>
</section>

<section id="conclusions">
  <h2>Висновки</h2>
  <p>У ході виконання лабораторної роботи №5 було опановано роботу з об'єктами та класами в JavaScript. Реалізовано методи масивів <code>flatMap</code>, <code>filter</code>, <code>sort</code>, <code>reduce</code>, <code>every</code>. Навчилася створювати класи з підтримкою ланцюжкових викликів (Method Chaining) та використовувати приватні поля класів.</p>
</section>

<script>
// --- Task 1.1 ---
function logProduct(product) { console.log("Product created:", product); }
function logTotalPrice(product) {
    const total = (product.price && product.quantity) ? product.price * product.quantity : 0;
    console.log(`Total price for ${product.name}: ${total}`);
}
function createProduct(obj, callback) {
    const product = { ...obj, id: Date.now() };
    callback(product);
}
function runTask1() {
    const item = { name: "Laptop", price: 1500, quantity: 2 };
    let out = "";
    createProduct(item, (p) => {
        logProduct(p);
        out += `[logProduct]: ID ${p.id}, Name: ${p.name}\n`;
    });
    createProduct(item, (p) => {
        logTotalPrice(p);
        out += `[logTotalPrice]: Total: ${p.price * p.quantity}`;
    });
    document.getElementById('log1').innerText = out;
}

// --- Task 1.3 ---
const medicines = {
    Агалгін: new Date("2022-05-01"),
    Ношпа: new Date("2025-07-02"),
    Альфахолін: new Date("2024-12-21"),
    Аспірин: new Date("2022-08-15"),
    Аспаркам: new Date("2024-04-18"),
};
function runTask3() {
    const entries = Object.entries(medicines);
    const now = new Date();
    const valid = entries.filter(([name, date]) => date > now);
    valid.sort((a, b) => a[1] - b[1]);
    const names = valid.map(([name, date]) => `${name} (${date.toISOString().split('T')[0]})`);
    document.getElementById('log3').innerText = names.join("\n");
}

// --- Task 1.5 ---
const fruits = [
  { name: "apple", price: 200 },
  { name: "orange", price: 300 },
  { name: "grapes", price: 750 },
];
function applyDiscountAndId(arr) {
    return arr.map((fruit, index) => ({
        ...fruit,
        id: index + 1,
        price: fruit.price * 0.8
    }));
}
function runTask5() {
    const result = applyDiscountAndId(fruits);
    document.getElementById('log5').innerText = JSON.stringify(result, null, 2);
}

// --- Task 1.7 ---
class Client {
    #login; #email;
    constructor(login, email) { this.#login = login; this.#email = email; }
    get login() { return this.#login; }
    set login(val) { if(val) this.#login = val; }
    get email() { return this.#email; }
    set email(val) { if(val.includes("@")) this.#email = val; }
}
function runTask7() {
    const client = new Client("user1", "test@mail.com");
    let log = `Start: ${client.login}, ${client.email}\n`;
    client.login = "admin";
    client.email = "admin@google.com";
    log += `Change: ${client.login}, ${client.email}`;
    document.getElementById('log7').innerText = log;
}

// --- Task 1.9 ---
const tweets = [
    { id: "000", likes: 5, tags: ["js", "nodejs"] },
    { id: "001", likes: 2, tags: ["html", "css"] },
    { id: "002", likes: 17, tags: ["html", "js", "nodejs"] },
    { id: "003", likes: 8, tags: ["css", "react"] },
    { id: "004", likes: 0, tags: ["js", "nodejs", "react"] },
];
function countTags(arr) {
    return arr.reduce((acc, tweet) => {
        tweet.tags.forEach(tag => { acc[tag] = (acc[tag] || 0) + 1; });
        return acc;
    }, {});
}
function runTask9() {
    const stats = countTags(tweets);
    document.getElementById('log9').innerText = JSON.stringify(stats, null, 2);
}

// --- Task 1.10 ---
function checkBrackets(str) {
    const stack = [];
    const map = { '(': ')', '{': '}', '[': ']' };
    for (let char of str) {
        if (map[char]) stack.push(char);
        else if (Object.values(map).includes(char)) {
            if (map[stack.pop()] !== char) return false;
        }
    }
    return stack.length === 0;
}
function runTask10() {
    const s1 = "function t() { return [1]; }";
    const s2 = "function t() { return [1; }";
    document.getElementById('log10').innerText = `"${s1}" -> ${checkBrackets(s1)}\n"${s2}" -> ${checkBrackets(s2)}`;
}

// --- Task 2.1 ---
const data = [
  { id: 1, values: [1, 2, 3] },
  { id: 2, values: [4, 5, 6] },
  { id: 3, values: [7, 8, 9] },
];
function runTask2_1() {
    const flatValues = data.flatMap(item => item.values);
    document.getElementById('res2_1').innerText = `Вхід: ${JSON.stringify(data)}\nВихід: [${flatValues.join(', ')}]`;
}

// --- Task 2.3 ---
const numbers = [2, 4, 6, 8, 10];
function runTask2_3() {
    const allEven = numbers.every(num => num % 2 === 0);
    document.getElementById('res2_3').innerText = `Масив: [${numbers.join(', ')}]\nВсі парні? -> ${allEven}`;
}

// --- Task 2.5 ---
const stringArray = ['banana', 'orange', 'apple', 'pear'];
function runTask2_5() {
    const sorted = [...stringArray].sort();
    document.getElementById('res2_5').innerText = `Оригінал: [${stringArray.join(', ')}]\nСорт: [${sorted.join(', ')}]`;
}

// --- Task 2.7 ---
class Calculator {
    constructor() { this.value = 0; }
    number(val) { this.value = val; return this; }
    add(val) { this.value += val; return this; }
    subtract(val) { this.value -= val; return this; }
    multiply(val) { this.value *= val; return this; }
    divide(val) {
        if (val === 0) { alert("Ділення на 0!"); return this; }
        this.value /= val; return this;
    }
    getResult() { return this.value; }
}
function runTask2_7() {
    const calc = new Calculator();
    const res = calc.number(10).add(5).subtract(3).multiply(4).divide(2).getResult();
    document.getElementById('res2_7').innerText = `((10+5)-3)*4/2 = ${res}`;
}
</script>

</body>
</html>